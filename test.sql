-- 1) 新建所有 test_<洛谷账号> 用户
INSERT INTO `user` (username, password, real_name, major, email, avatar, active)
VALUES
  ('test_Reisentyan',     'test123', 'Luogu测试1', '计算机', 'test_Reisentyan@example.com', 'https://example.com/avatar1.jpg', true),
  ('test_cyanle',         'test123', 'Luogu测试2', '软件工程', 'test_cyanle@example.com', 'https://example.com/avatar2.jpg', true),
  ('test_yuanzhiti',      'test123', 'Luogu测试3', '人工智能', 'test_yuanzhiti@example.com', 'https://example.com/avatar3.jpg', true),
  ('test_Osakooo',        'test123', 'Luogu测试4', '数据科学', 'test_Osakooo@example.com', 'https://example.com/avatar4.jpg', true),
  ('test_1101703918',     'test123', 'Luogu测试5', '计算机科学与技术', 'test_1101703918@example.com', 'https://example.com/avatar5.jpg', true),
  ('test_Jimmdil Uni',    'test123', 'Luogu测试6', '软件工程', 'test_Jimmdil_Uni@example.com', 'https://example.com/avatar6.jpg', true),
  ('test_Paramecium-4',   'test123', 'Luogu测试7', '人工智能', 'test_Paramecium-4@example.com', 'https://example.com/avatar7.jpg', true),
  ('test_FFFF_',          'test123', 'Luogu测试8', '数据科学', 'test_FFFF_@example.com', 'https://example.com/avatar8.jpg', true),
  ('test_yyds123',        'test123', 'Luogu测试9', '计算机科学与技术', 'test_yyds123@example.com', 'https://example.com/avatar9.jpg', true),
  ('test_DangX',          'test123', 'Luogu测试10', '软件工程', 'test_DangX@example.com', 'https://example.com/avatar10.jpg', true),
  ('test_kkzjyy',         'test123', 'Luogu测试11', '人工智能', 'test_kkzjyy@example.com', 'https://example.com/avatar11.jpg', true),
  ('test_fxyyy',          'test123', 'Luogu测试12', '数据科学', 'test_fxyyy@example.com', 'https://example.com/avatar12.jpg', true),
  ('test_nuoPByan',       'test123', 'Luogu测试13', '计算机科学与技术', 'test_nuoPByan@example.com', 'https://example.com/avatar13.jpg', true),
  ('test_fm_los',         'test123', 'Luogu测试14', '软件工程', 'test_fm_los@example.com', 'https://example.com/avatar14.jpg', true),
  ('test_LianKirin',      'test123', 'Luogu测试15', '人工智能', 'test_LianKirin@example.com', 'https://example.com/avatar15.jpg', true),
  ('test_ganzaoji',       'test123', 'Luogu测试16', '数据科学', 'test_ganzaoji@example.com', 'https://example.com/avatar16.jpg', true),
  ('test_Ritzer',         'test123', 'Luogu测试17', '计算机科学与技术', 'test_Ritzer@example.com', 'https://example.com/avatar17.jpg', true),
  ('test_Paris_dream',    'test123', 'Luogu测试18', '软件工程', 'test_Paris_dream@example.com', 'https://example.com/avatar18.jpg', true),
  ('test_zanq',           'test123', 'Luogu测试19', '人工智能', 'test_zanq@example.com', 'https://example.com/avatar19.jpg', true),
  ('test_xhzhaoyibo',     'test123', 'Luogu测试20', '数据科学', 'test_xhzhaoyibo@example.com', 'https://example.com/avatar20.jpg', true),
  ('test_oook_',          'test123', 'Luogu测试21', '计算机科学与技术', 'test_oook_@example.com', 'https://example.com/avatar21.jpg', true),
  ('test_yza_sk',         'test123', 'Luogu测试22', '软件工程', 'test_yza_sk@example.com', 'https://example.com/avatar22.jpg', true),
  ('test_OLLN',           'test123', 'Luogu测试23', '人工智能', 'test_OLLN@example.com', 'https://example.com/avatar23.jpg', true),
  ('test_xylalala',       'test123', 'Luogu测试24', '数据科学', 'test_xylalala@example.com', 'https://example.com/avatar24.jpg', true),
  ('test_ther-121',       'test123', 'Luogu测试25', '计算机科学与技术', 'test_ther-121@example.com', 'https://example.com/avatar25.jpg', true),
  ('test_SisySycho',      'test123', 'Luogu测试26', '软件工程', 'test_SisySycho@example.com', 'https://example.com/avatar26.jpg', true),
  ('test_CFerr',          'test123', 'Luogu测试27', '人工智能', 'test_CFerr@example.com', 'https://example.com/avatar27.jpg', true),
  ('test_admin-123',      'test123', 'Luogu测试28', '数据科学', 'test_admin-123@example.com', 'https://example.com/avatar28.jpg', true),
  ('test_8letters',       'test123', 'Luogu测试29', '计算机科学与技术', 'test_8letters@example.com', 'https://example.com/avatar29.jpg', true),
  ('test_qqqqqa',         'test123', 'Luogu测试30', '软件工程', 'test_qqqqqa@example.com', 'https://example.com/avatar30.jpg', true),
  ('test_wxsQ7',          'test123', 'Luogu测试31', '人工智能', 'test_wxsQ7@example.com', 'https://example.com/avatar31.jpg', true),
  ('test_sgsh1',          'test123', 'Luogu测试32', '数据科学', 'test_sgsh1@example.com', 'https://example.com/avatar32.jpg', true),
  ('test_xiaoqiwangzhe',  'test123', 'Luogu测试33', '计算机科学与技术', 'test_xiaoqiwangzhe@example.com', 'https://example.com/avatar33.jpg', true),
  ('test_nsym11',         'test123', 'Luogu测试34', '软件工程', 'test_nsym11@example.com', 'https://example.com/avatar34.jpg', true),
  ('test_Bulonte',        'test123', 'Luogu测试35', '人工智能', 'test_Bulonte@example.com', 'https://example.com/avatar35.jpg', true),
  ('test_lihri686',       'test123', 'Luogu测试36', '数据科学', 'test_lihri686@example.com', 'https://example.com/avatar36.jpg', true),
  ('test_dz.zz',          'test123', 'Luogu测试37', '计算机科学与技术', 'test_dz.zz@example.com', 'https://example.com/avatar37.jpg', true);

-- 2) 将以上用户与洛谷账号关联到 user_oj（去重&不重复插入）
INSERT INTO `user_oj` (user_id, account_name, platform)
SELECT u.id, a.luogu, 'LUOGU'
FROM (
  SELECT 'Reisentyan'    AS luogu UNION
  SELECT 'cyanle'        UNION
  SELECT 'yuanzhiti'     UNION
  SELECT 'Osakooo'       UNION
  SELECT '1101703918'    UNION
  SELECT 'Jimmdil Uni'   UNION
  SELECT 'Paramecium-4'  UNION
  SELECT 'FFFF_'         UNION
  SELECT 'yyds123'       UNION
  SELECT 'DangX'         UNION
  SELECT 'kkzjyy'        UNION
  SELECT 'fxyyy'         UNION
  SELECT 'nuoPByan'      UNION
  SELECT 'fm_los'        UNION
  SELECT 'LianKirin'     UNION
  SELECT 'ganzaoji'      UNION
  SELECT 'Ritzer'        UNION
  SELECT 'Paris_dream'   UNION
  SELECT 'zanq'          UNION
  SELECT 'xhzhaoyibo'    UNION
  SELECT 'oook_'         UNION
  SELECT 'yza_sk'        UNION
  SELECT 'OLLN'          UNION
  SELECT 'xylalala'      UNION
  SELECT 'ther-121'      UNION
  SELECT 'SisySycho'     UNION
  SELECT 'CFerr'         UNION
  SELECT 'admin-123'     UNION
  SELECT '8letters'      UNION
  SELECT 'qqqqqa'        UNION
  SELECT 'wxsQ7'         UNION
  SELECT 'sgsh1'         UNION
  SELECT 'xiaoqiwangzhe' UNION
  SELECT 'nsym11'        UNION
  SELECT 'Bulonte'       UNION
  SELECT 'lihri686'      UNION
  SELECT 'dz.zz'
) AS a
JOIN `user` AS u
  ON u.username = CONCAT('test_', a.luogu)
WHERE NOT EXISTS (
  SELECT 1
  FROM `user_oj` oj
  WHERE oj.user_id       = u.id
    AND oj.platform      = 'LUOGU'
    AND oj.account_name  = a.luogu
);











INSERT INTO user (username, password, real_name)
VALUES
  ('cf_test_fxyyy',        'test123', 'cf测试1'),
  ('cf_test_nuoPByan',     'test123', 'cf测试2'),
  ('cf_test_fm_los',       'test123', 'cf测试3'),
  ('cf_test_LianKirin',    'test123', 'cf测试4'),
  ('cf_test_ganzaoji',     'test123', 'cf测试5'),
  ('cf_test_Ritzer',       'test123', 'cf测试6'),
  ('cf_test_Paris_dream',  'test123', 'cf测试7'),
  ('cf_test_zanq',         'test123', 'cf测试8'),
  ('cf_test_xhzhaoyibo',   'test123', 'cf测试9'),
  ('cf_test_oook_',        'test123', 'cf测试10'),
  ('cf_test_yza_sk',       'test123', 'cf测试11'),
  ('cf_test_OLLN',         'test123', 'cf测试12'),
  ('cf_test_xylalala',     'test123', 'cf测试13'),
  ('cf_test_ther-121',     'test123', 'cf测试14'),
  ('cf_test_SisySycho',    'test123', 'cf测试15'),
  ('cf_test_CFerr',        'test123', 'cf测试16'),
  ('cf_test_admin-123',    'test123', 'cf测试17'),
  ('cf_test_8letters',     'test123', 'cf测试18'),
  ('cf_test_qqqqqa',       'test123', 'cf测试19'),
  ('cf_test_wxsQ7',        'test123', 'cf测试20'),
  ('cf_test_sgsh1',        'test123', 'cf测试21'),
  ('cf_test_xiaoqiwangzhe','test123', 'cf测试22'),
  ('cf_test_nsym11',       'test123', 'cf测试23'),
  ('cf_test_Bulonte',      'test123', 'cf测试24'),
  ('cf_test_lihri686',     'test123', 'cf测试25'),
  ('cf_test_dz.zz',        'test123', 'cf测试26');

INSERT INTO user_oj (user_id, account_name, platform)
SELECT u.id, a.cf, 'CODEFORCES'
FROM (
  SELECT 'fxyyy'       AS cf UNION
  SELECT 'nuoPByan'    UNION
  SELECT 'fm_los'      UNION
  SELECT 'LianKirin'   UNION
  SELECT 'ganzaoji'    UNION
  SELECT 'Ritzer'      UNION
  SELECT 'Paris_dream' UNION
  SELECT 'zanq'        UNION
  SELECT 'xhzhaoyibo'  UNION
  SELECT 'oook_'       UNION
  SELECT 'yza_sk'      UNION
  SELECT 'OLLN'        UNION
  SELECT 'xylalala'    UNION
  SELECT 'ther-121'    UNION
  SELECT 'SisySycho'   UNION
  SELECT 'CFerr'       UNION
  SELECT 'admin-123'   UNION
  SELECT '8letters'    UNION
  SELECT 'qqqqqa'      UNION
  SELECT 'wxsQ7'       UNION
  SELECT 'sgsh1'       UNION
  SELECT 'xiaoqiwangzhe' UNION
  SELECT 'nsym11'      UNION
  SELECT 'Bulonte'     UNION
  SELECT 'lihri686'    UNION
  SELECT 'dz.zz'
) AS a
JOIN user AS u
  ON u.username = CONCAT('cf_test_', a.cf)
WHERE NOT EXISTS (
  SELECT 1
  FROM user_oj oj
  WHERE oj.user_id       = u.id
    AND oj.platform      = 'CODEFORCES'
    AND oj.account_name  = a.cf
);


-- 插入管理员用户
INSERT INTO `user` (
    username,
    password,
    real_name,
    email,
    major,
    avatar,
    active
) VALUES (
    'admin',
    '$10$35yDDNSm6g6KdkPCbtTMfe/tFY6YQepZnSxwXIFxlTqltfQj1DTy6', -- 123456的加密
    '系统管理员',
    '3379782451@qq.com',
    '计算机科学与技术',
    'https://example.com/avatar1.jpg',
    true
);

-- 获取该用户的 ID（假设是自增主键）
-- 插入角色信息
INSERT INTO `user_roles` (
    user_id,
    roles
) SELECT id, 'ADMIN'
  FROM `user` WHERE username = 'admin';
